# Meeting Notes

bus arbiter has priorities, if problems we can just raise the priority of the debug controler

hmdi controler permanently reads data from the frame buffer;.. ?

- [x] REMOVE combinatorial paths on bus grant signals and input bus signals
- [x] double check who ends transaction in case of error
- [ ] double assignments are not guaranteed to not work
- [ ] dummy value for dummy memory read, increment if 

# Work Done

## combinatorial paths

latch all signals at the top level jtag interface?
safest solution, in `jtag_if.v` directly
```verilog
reg         _sb_reset_i;
reg         _sb_grant_i;
reg [31:0]  _sb_address_data_i;
reg         _sb_end_transaction_i;
reg         _sb_data_valid_i;
reg         _sb_busy_i;
reg         _sb_error_i;

always @(posedge sb_clock_i) begin
    _sb_reset_i            <= sb_reset_i;
    _sb_grant_i            <= sb_grant_i;
    _sb_address_data_i     <= sb_address_data_i;
    _sb_end_transaction_i  <= sb_end_transaction_i;
    _sb_data_valid_i       <= sb_data_valid_i;
    _sb_busy_i             <= sb_busy_i;
    _sb_error_i            <= sb_error_i;
end
```

also make sure all output signals are registers
```verilog
output wire        sb_request_o, // reg         reg_bus_req;
output wire [31:0] sb_address_data_o, // reg [31:0] sb_address_data_o; 
output wire [3:0]  sb_byte_enables_o, //reg [3:0]  sb_byte_enables_o;
output wire [7:0]  sb_burst_size_o, // CONSTANT 0 (full 32bit reads everytime)
output wire        sb_read_n_write_o,//reg        sb_read_n_write_o;
output wire        sb_begin_transaction_o, //reg        sb_begin_transaction_o;
output wire        sb_end_transaction_o,//reg        sb_end_transaction_o;
output wire        sb_data_valid_o,//reg        sb_data_valid_o; 
```



## combinatorial loops ?

```

Info: Found 41 combinational loops:
Info:     loop 1:
Info:         jtag_if_impl._sb_error_i_LUT4_B.A (s_jtagEndTransaction)
Info:         jtag_if_impl._sb_error_i_LUT4_B.F (jtag_if_impl.adbg_top_impl.sb_end_transaction_o_LUT4_Z_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_end_transaction_o_LUT4_Z.D (jtag_if_impl.adbg_top_impl.sb_end_transaction_o_LUT4_Z_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_end_transaction_o_LUT4_Z.F (s_jtagEndTransaction)
Info:     loop 2:
Info:         jtag_if_impl._sb_grant_i_LUT4_C.B (jtag_if_impl.adbg_top_impl.wb.i_dbg_wb.wb_biu_i.next_fsm_state[0])
Info:         jtag_if_impl._sb_grant_i_LUT4_C.F (jtag_if_impl.adbg_top_impl.wb.i_dbg_wb.wb_biu_i.next_fsm_state_PFUMX_Z_ALUT)
Info:         jtag_if_impl.adbg_top_impl.wb.i_dbg_wb.wb_biu_i.next_fsm_state_PFUMX_Z_BLUT_LUT4_Z.F1 (jtag_if_impl.adbg_top_impl.wb.i_dbg_wb.wb_biu_i.next_fsm_state_PFUMX_Z_ALUT)
Info:         jtag_if_impl.adbg_top_impl.wb.i_dbg_wb.wb_biu_i.next_fsm_state_PFUMX_Z_BLUT_LUT4_Z.OFX (jtag_if_impl.adbg_top_impl.wb.i_dbg_wb.wb_biu_i.next_fsm_state[0])
Info:     loop 3:
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z.D (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z.F (s_jtagAddressData[31])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_D_LUT4_Z.B (s_jtagAddressData[31])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_D_LUT4_Z.F (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_D[3])
Info:     loop 4:
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_1.D (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_1_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_1.F (s_jtagAddressData[30])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_1_D_LUT4_Z.B (s_jtagAddressData[30])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_1_D_LUT4_Z.F (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_1_D[3])
Info:     loop 5:
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_10.D (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_10_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_10.F (s_jtagAddressData[21])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_10_D_LUT4_Z.B (s_jtagAddressData[21])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_10_D_LUT4_Z.F (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_10_D[3])
Info:     loop 6:
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_11.D (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_11_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_11.F (s_jtagAddressData[20])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_11_D_LUT4_Z.B (s_jtagAddressData[20])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_11_D_LUT4_Z.F (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_11_D[3])
Info:     loop 7:
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_12.D (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_12_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_12.F (s_jtagAddressData[19])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_12_D_LUT4_Z.B (s_jtagAddressData[19])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_12_D_LUT4_Z.F (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_12_D[3])
Info:     loop 8:
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_13.D (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_13_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_13.F (s_jtagAddressData[18])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_13_D_LUT4_Z.B (s_jtagAddressData[18])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_13_D_LUT4_Z.F (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_13_D[3])
Info:     loop 9:
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_14.D (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_14_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_14.F (s_jtagAddressData[17])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_14_D_LUT4_Z.B (s_jtagAddressData[17])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_14_D_LUT4_Z.F (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_14_D[3])
Info:     loop 10:
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_15.D (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_15_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_15.F (s_jtagAddressData[16])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_15_D_LUT4_Z.B (s_jtagAddressData[16])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_15_D_LUT4_Z.F (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_15_D[3])
Info:     loop 11:
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_16.D (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_16_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_16.F (s_jtagAddressData[15])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_16_D_LUT4_Z.B (s_jtagAddressData[15])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_16_D_LUT4_Z.F (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_16_D[3])
Info:     loop 12:
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_17.D (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_17_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_17.F (s_jtagAddressData[14])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_17_D_LUT4_Z.B (s_jtagAddressData[14])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_17_D_LUT4_Z.F (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_17_D[3])
Info:     loop 13:
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_18.D (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_18_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_18.F (s_jtagAddressData[13])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_18_D_LUT4_Z.B (s_jtagAddressData[13])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_18_D_LUT4_Z.F (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_18_D[3])
Info:     loop 14:
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_19.D (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_19_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_19.F (s_jtagAddressData[12])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_19_D_LUT4_Z.B (s_jtagAddressData[12])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_19_D_LUT4_Z.F (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_19_D[3])
Info:     loop 15:
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_2.D (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_2_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_2.F (s_jtagAddressData[29])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_2_D_LUT4_Z.B (s_jtagAddressData[29])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_2_D_LUT4_Z.F (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_2_D[3])
Info:     loop 16:
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_20.D (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_20_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_20.F (s_jtagAddressData[11])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_20_D_LUT4_Z.B (s_jtagAddressData[11])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_20_D_LUT4_Z.F (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_20_D[3])
Info:     loop 17:
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_21.D (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_21_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_21.F (s_jtagAddressData[10])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_21_D_LUT4_Z.B (s_jtagAddressData[10])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_21_D_LUT4_Z.F (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_21_D[3])
Info:     loop 18:
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_22.D (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_22_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_22.F (s_jtagAddressData[9])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_22_D_LUT4_Z.B (s_jtagAddressData[9])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_22_D_LUT4_Z.F (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_22_D[3])
Info:     loop 19:
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_23.D (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_23_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_23.F (s_jtagAddressData[8])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_23_D_LUT4_Z.B (s_jtagAddressData[8])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_23_D_LUT4_Z.F (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_23_D[3])
Info:     loop 20:
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_24.D (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_24_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_24.F (s_jtagAddressData[7])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_24_D_LUT4_Z.B (s_jtagAddressData[7])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_24_D_LUT4_Z.F (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_24_D[3])
Info:     loop 21:
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_25.D (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_25_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_25.F (s_jtagAddressData[6])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_25_D_LUT4_Z.B (s_jtagAddressData[6])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_25_D_LUT4_Z.F (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_25_D[3])
Info:     loop 22:
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_26.D (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_26_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_26.F (s_jtagAddressData[5])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_26_D_LUT4_Z.B (s_jtagAddressData[5])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_26_D_LUT4_Z.F (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_26_D[3])
Info:     loop 23:
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_27.D (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_27_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_27.F (s_jtagAddressData[4])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_27_D_LUT4_Z.B (s_jtagAddressData[4])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_27_D_LUT4_Z.F (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_27_D[3])
Info:     loop 24:
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_28.D (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_28_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_28.F (s_jtagAddressData[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_28_D_LUT4_Z.B (s_jtagAddressData[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_28_D_LUT4_Z.F (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_28_D[3])
Info:     loop 25:
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_29.D (jtag_if_impl.adbg_top_impl.wb.i_dbg_wb.wb_biu_i.wb_fsm_state_LUT4_C_Z[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_29.F (s_jtagAddressData[2])
Info:         jtag_if_impl.adbg_top_impl.wb.i_dbg_wb.wb_biu_i.wb_fsm_state_LUT4_C_Z_LUT4_Z.B (s_jtagAddressData[2])
Info:         jtag_if_impl.adbg_top_impl.wb.i_dbg_wb.wb_biu_i.wb_fsm_state_LUT4_C_Z_LUT4_Z.F (jtag_if_impl.adbg_top_impl.wb.i_dbg_wb.wb_biu_i.wb_fsm_state_LUT4_C_Z[3])
Info:     loop 26:
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_3.D (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_3_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_3.F (s_jtagAddressData[28])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_3_D_LUT4_Z.B (s_jtagAddressData[28])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_3_D_LUT4_Z.F (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_3_D[3])
Info:     loop 27:
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_30.D (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_30_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_30.F (s_jtagAddressData[1])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_30_D_LUT4_Z.B (s_jtagAddressData[1])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_30_D_LUT4_Z.F (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_30_D[3])
Info:     loop 28:
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_31.D (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_31_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_31.F (s_jtagAddressData[0])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_31_D_LUT4_Z.B (s_jtagAddressData[0])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_31_D_LUT4_Z.F (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_31_D[3])
Info:     loop 29:
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_4.D (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_4_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_4.F (s_jtagAddressData[27])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_4_D_LUT4_Z.B (s_jtagAddressData[27])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_4_D_LUT4_Z.F (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_4_D[3])
Info:     loop 30:
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_5.D (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_5_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_5.F (s_jtagAddressData[26])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_5_D_LUT4_Z.B (s_jtagAddressData[26])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_5_D_LUT4_Z.F (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_5_D[3])
Info:     loop 31:
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_6.D (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_6_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_6.F (s_jtagAddressData[25])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_6_D_LUT4_Z.B (s_jtagAddressData[25])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_6_D_LUT4_Z.F (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_6_D[3])
Info:     loop 32:
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_7.D (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_7_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_7.F (s_jtagAddressData[24])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_7_D_LUT4_Z.B (s_jtagAddressData[24])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_7_D_LUT4_Z.F (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_7_D[3])
Info:     loop 33:
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_8.D (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_8_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_8.F (s_jtagAddressData[23])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_8_D_LUT4_Z.B (s_jtagAddressData[23])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_8_D_LUT4_Z.F (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_8_D[3])
Info:     loop 34:
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_9.D (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_9_D[3])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_9.F (s_jtagAddressData[22])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_9_D_LUT4_Z.B (s_jtagAddressData[22])
Info:         jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_9_D_LUT4_Z.F (jtag_if_impl.adbg_top_impl.sb_address_data_o_LUT4_Z_9_D[3])
Info:     loop 35:
Info:         jtag_if_impl.adbg_top_impl.sb_begin_transaction_o_LUT4_Z.B (s_jtagBeginTransaction)
Info:         jtag_if_impl.adbg_top_impl.sb_begin_transaction_o_LUT4_Z.F (s_jtagBeginTransaction)
Info:     loop 36:
Info:         jtag_if_impl.adbg_top_impl.sb_data_valid_o_LUT4_Z.A (s_jtagDataValid)
Info:         jtag_if_impl.adbg_top_impl.sb_data_valid_o_LUT4_Z.F (s_jtagDataValid)
Info:     loop 37:
Info:         jtag_if_impl.adbg_top_impl.sb_read_n_write_o_LUT4_Z.B (s_jtagReadNotWrite)
Info:         jtag_if_impl.adbg_top_impl.sb_read_n_write_o_LUT4_Z.F (s_jtagReadNotWrite)
Info:     loop 38:
Info:         jtag_if_impl.adbg_top_impl.sb_request_o_LUT4_Z.C (s_busRequests[27])
Info:         jtag_if_impl.adbg_top_impl.sb_request_o_LUT4_Z.F (s_busRequests[27])
Info:     loop 39:
Info:         jtag_if_impl.adbg_top_impl.wb.i_dbg_wb.wb_biu_i.data_o_en_PFUMX_Z_ALUT_LUT4_Z.C (jtag_if_impl.adbg_top_impl.wb.i_dbg_wb.wb_biu_i.data_o_en)
Info:         jtag_if_impl.adbg_top_impl.wb.i_dbg_wb.wb_biu_i.data_o_en_PFUMX_Z_ALUT_LUT4_Z.F (jtag_if_impl.adbg_top_impl.wb.i_dbg_wb.wb_biu_i.data_o_en_PFUMX_Z_ALUT)
Info:         jtag_if_impl.adbg_top_impl.wb.i_dbg_wb.wb_biu_i.data_o_en_PFUMX_Z_BLUT_LUT4_Z.F1 (jtag_if_impl.adbg_top_impl.wb.i_dbg_wb.wb_biu_i.data_o_en_PFUMX_Z_ALUT)
Info:         jtag_if_impl.adbg_top_impl.wb.i_dbg_wb.wb_biu_i.data_o_en_PFUMX_Z_BLUT_LUT4_Z.OFX (jtag_if_impl.adbg_top_impl.wb.i_dbg_wb.wb_biu_i.data_o_en)
Info:     loop 40:
Info:         jtag_if_impl.adbg_top_impl.wb.i_dbg_wb.wb_biu_i.next_fsm_state_LUT4_Z.B (jtag_if_impl.adbg_top_impl.wb.i_dbg_wb.wb_biu_i.next_fsm_state[1])
Info:         jtag_if_impl.adbg_top_impl.wb.i_dbg_wb.wb_biu_i.next_fsm_state_LUT4_Z.F (jtag_if_impl.adbg_top_impl.wb.i_dbg_wb.wb_biu_i.next_fsm_state[1])
Info:     loop 41:
Info:         jtag_if_impl.adbg_top_impl.wb.i_dbg_wb.wb_biu_i.rdy_sync_en_LUT4_Z.B (jtag_if_impl.adbg_top_impl.wb.i_dbg_wb.wb_biu_i.rdy_sync_en)
Info:         jtag_if_impl.adbg_top_impl.wb.i_dbg_wb.wb_biu_i.rdy_sync_en_LUT4_Z.F (jtag_if_impl.adbg_top_impl.wb.i_dbg_wb.wb_biu_i.rdy_sync_en)
ERROR: Timing analysis failed due to combinational loops.
0 warnings, 1 error
Failed to open input file
empty

```

after un-ORing bus signals i managed to get down to 5 combinational loops.
3 of them disappear if i latch BIU outputs on clock instead of combinational paths.
makes no sense. ALL inputs are latched and all outputs are using registers with non blocking assignments.....

### implicit latching through switches

```
always @ (*)
  begin
    case (wb_fsm_state)

      // In idle state, go to request state on start toggle
      `STATE_IDLE:
      begin
        //if(start_toggle && !(wb_ack_i || sb_error_i)) next_fsm_state <= `STATE_TRANSFER;  // Don't go to next state for 1-cycle transfer
        //else next_fsm_state <= `STATE_IDLE;
        if(start_toggle) next_fsm_state <= `STATE_REQUEST;
        else next_fsm_state <= `STATE_IDLE;
      end

      // In request state, go to transfer state when granted access
      // by bus arbiter
      `STATE_REQUEST:
      begin
        if(sb_grant_i) next_fsm_state <= `STATE_TRANSFER;
        else next_fsm_state <= `STATE_REQUEST;
      end

      // In transfer state, go to idle state on ack or error
      default:  // `STATE_TRANSFER !!! IMPLICIT LATCHING !!!
      begin
        if ((sb_data_valid_i && !sb_busy_i) || sb_error_i) next_fsm_state <= `STATE_IDLE;
        else next_fsm_state <= `STATE_TRANSFER;
      end
    endcase
  end
```

`default` here is very important, otherwise it will be synthesized as a latch because it will be missing the default case. the compiler does not check if the switch contains all possible values... it's not like a Java enum, it's purely numeric so it makes sense to have `default`  absolutely necessary.... lost a solid 2h on that :)

## when is theÂ busy signal ready?

i remember asking myself the same question in CS473 but I dont remember if the busy signal is ready BEFORE the positive clock edge.
we need to latch this signal to prevent combinational loops with inputs/outputs, but latching it will induce a 1 clock delay, making it impossible to unassert addressData on time.

i checked the code of the sdram controller and it looks like the busy signal is ready before the positive clock edge, can you confirm this?
